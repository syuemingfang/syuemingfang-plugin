;(function($){ $.fn.plugin=function(opt){ var f=$.fn.plugin; $.extend(f, { version: '0.1.0.0', set: { on: 'click', str: 'Hello World' };, log: function(str){ console.log(str) }; }); var func=function(that, set){ var initialize=function(){ that.on(set.on, function(){ start(); }); }; var start=function(){ f.log(set.str); setTimeout(start, 1000); }; initialize(); }; return this.each(function(){ var set=$.extend(f.set, opt); func($(this), set); }); } };)(jQuery);